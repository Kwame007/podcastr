
  <div class="episodes-table-container">
  <h1>Episodes</h1>
    <div>
      <!-- Loading Skeleton -->
      <div *ngIf="loading" class="skeleton-container">
        <table class="episodes-table">
          <thead>
            <tr>
              <th>Poster</th>
              <th>Title</th>
              <th>Duration</th>
              <th>Posted On</th>
              <th>Audio</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of [1,2,3,4,5,7,8]" class="skeleton-row">
              <td>
                <div class="skeleton-image"></div>
              </td>
              <td>
                <div class="skeleton-text skeleton-title"></div>
              </td>
              <td>
                <div class="skeleton-text skeleton-duration"></div>
              </td>
              <td>
                <div class="skeleton-text skeleton-date"></div>
              </td>
              <td>
                <div class="skeleton-text skeleton-button"></div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Error State -->
      <div *ngIf="error && !loading" class="error-container">
        <div class="error-message">
          <p>{{ error }}</p>
          <button (click)="retryLoad()" class="retry-button">Try Again</button>
        </div>
      </div>

      <!-- Actual Episodes Table -->
      <table *ngIf="!loading && !error" class="episodes-table">
    <thead>
      <tr>
        <th>Poster</th>
        <th>Title</th>
        <th>Duration</th>
        <th>Posted On</th>
        <th>Audio</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let episode of episodes$ | async">
         <td>
          <img *ngIf="episode.img_url" [src]="episode.img_url" alt="Episode image" width="50" />
        </td>
        <td>{{ episode.title }}</td>
        <td>{{ episode.duration }}</td>
        <td>{{ episode.posted_on | date:'mediumDate' }}</td>
        <td>
          <button *ngIf="episode.audio_url"
                  (click)="playPauseAudio(episode.audio_url, episode.id.toString())"
                  [ngClass]="'audio-play-btn'"
                  [attr.aria-label]="isPlaying(episode.id.toString()) ? 'Pause' : 'Play'"
                  type="button">
            <span *ngIf="!isPlaying(episode.id.toString())">
              <!-- Play icon -->
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="10" cy="10" r="10" fill="#f3f4f6"/>
                <polygon points="8,6 15,10 8,14" fill="#18181b"/>
              </svg>
            </span>
            <span *ngIf="isPlaying(episode.id.toString())">
              <!-- Pause icon -->
              <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="10" cy="10" r="10" fill="#f3f4f6"/>
                <rect x="7" y="6" width="2" height="8" fill="#18181b"/>
                <rect x="11" y="6" width="2" height="8" fill="#18181b"/>
              </svg>
            </span>
          </button>
        </td>
       
      </tr>
    </tbody>
  </table>
    </div>
  </div>
